import {call, put} from 'redux-saga/effects'
import {path} from 'ramda'
import MetalActions from '../Redux/MetalRedux'
import MetalApi from '../Services'

/* Define the api here */
const api = MetalApi.tracks()

export function * tracksListSaga (action) {
  const { genre, band, offset, limit, tracks } = action
  const prevTracks = tracks || []
  // const response = yield call(api.getTrackList, genre, band, offset, limit)
  const response = {"duration":116,"problem":null,"originalError":null,"ok":true,"status":200,"headers":{"date":"Sat, 23 Jun 2018 17:22:06 GMT","content-type":"application/json;charset=utf-8","cache-control":"public, max-age=60, must-revalidate"},"config":{"transformRequest":{},"transformResponse":{},"timeout":0,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"headers":{"Accept":"application/json"},"method":"get","baseURL":"http://api.soundcloud.com/tracks?linked_partitioning=1&client_id=A9nHvHInU5NnEIdTmQbZVeMhfgAgrsdU&","url":"http://api.soundcloud.com/tracks?linked_partitioning=1&client_id=A9nHvHInU5NnEIdTmQbZVeMhfgAgrsdU&/limit=10&offset=0&q=sodom&tags=thrash,thrash metal,thrashmetal,metal","params":{}},"data":{"collection":[{"id":89459888,"kind":"track","created_at":"2013/04/25 16:16:49 +0000","last_modified":"2014/03/20 18:02:01 +0000","permalink":"sodom-m16","permalink_url":"https://soundcloud.com/overanalyzing/sodom-m16","title":"Sodom - M16","duration":294140,"sharing":"public","waveform_url":"https://w1.sndcdn.com/tQCTuPCNlUEn_m.png","stream_url":"https://api.soundcloud.com/tracks/89459888/stream","uri":"https://api.soundcloud.com/tracks/89459888","user_id":42787280,"artwork_url":"https://i1.sndcdn.com/artworks-000046413968-sp2vxh-large.jpg","comment_count":5,"commentable":true,"description":"İlk kayıt denemem. Tonda ve çalımda sıkıntılar mevcut, umarım zamanla daha iyi olur :)","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Thrash","isrc":"","label_id":null,"label_name":"","license":"all-rights-reserved","original_content_size":11753352,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":30,"state":"finished","streamable":true,"tag_list":"Metal Sodom","track_type":"","user":{"avatar_url":"https://i1.sndcdn.com/avatars-000040028534-spewkz-large.jpg","id":42787280,"kind":"user","permalink_url":"http://soundcloud.com/overanalyzing","uri":"https://api.soundcloud.com/users/42787280","username":"Overanalyzing","permalink":"overanalyzing","last_modified":"2015/11/18 20:29:07 +0000"},"likes_count":558,"attachments_uri":"https://api.soundcloud.com/tracks/89459888/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":183166164,"kind":"track","created_at":"2014/12/26 01:34:47 +0000","last_modified":"2018/03/26 02:30:51 +0000","permalink":"sodom-nuclear-winter","permalink_url":"https://soundcloud.com/rik-thrash-r/sodom-nuclear-winter","title":"Sodom - Nuclear Winter","duration":325045,"sharing":"public","waveform_url":"https://w1.sndcdn.com/Trwo7tdX2E5F_m.png","stream_url":"https://api.soundcloud.com/tracks/183166164/stream","uri":"https://api.soundcloud.com/tracks/183166164","user_id":128289807,"artwork_url":"https://i1.sndcdn.com/artworks-000112830230-hkgs7e-large.jpg","comment_count":1,"commentable":true,"description":"Name Band: Sodom\r\nGenre: Thrash Metal,Black Metal\r\nCountry: Germany\r\nYears Active: 1981-Present","download_count":100,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Thrash Metal","isrc":"","label_id":null,"label_name":"","license":"all-rights-reserved","original_content_size":13033275,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":6,"state":"finished","streamable":true,"tag_list":"Sodom \"Nuclear winter\" \"Black Metal\" \"Persecution Mania \" \"Thrash Metal\"","track_type":"","user":{"avatar_url":"https://i1.sndcdn.com/avatars-000161134262-wex9vk-large.jpg","id":128289807,"kind":"user","permalink_url":"http://soundcloud.com/rik-thrash-r","uri":"https://api.soundcloud.com/users/128289807","username":"Death","permalink":"rik-thrash-r","last_modified":"2018/04/14 01:51:30 +0000"},"likes_count":97,"attachments_uri":"https://api.soundcloud.com/tracks/183166164/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":266882981,"kind":"track","created_at":"2016/06/01 03:20:21 +0000","last_modified":"2016/06/01 03:20:26 +0000","permalink":"sodom-napalm-in-the-morning","permalink_url":"https://soundcloud.com/tino-samudio/sodom-napalm-in-the-morning","title":"SODOM - Napalm in the morning","duration":357048,"sharing":"public","waveform_url":"https://w1.sndcdn.com/fi2ZB6BKtZu3_m.png","stream_url":"https://api.soundcloud.com/tracks/266882981/stream","uri":"https://api.soundcloud.com/tracks/266882981","user_id":104785474,"artwork_url":"https://i1.sndcdn.com/artworks-000165339113-fee2hz-large.jpg","comment_count":0,"commentable":true,"description":"3er tema del álbum M-16 de la banda de thash metal alemana SODOM.","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Metal","isrc":null,"label_id":null,"label_name":null,"license":"all-rights-reserved","original_content_size":5992636,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":1,"state":"finished","streamable":true,"tag_list":"sodom \"Thrash Metal\" napalminthemorning germanythrash","track_type":null,"user":{"avatar_url":"https://i1.sndcdn.com/avatars-000228545435-oi5i43-large.jpg","id":104785474,"kind":"user","permalink_url":"http://soundcloud.com/tino-samudio","uri":"https://api.soundcloud.com/users/104785474","username":"Faustino Samudio","permalink":"tino-samudio","last_modified":"2016/06/01 03:25:54 +0000"},"likes_count":86,"attachments_uri":"https://api.soundcloud.com/tracks/266882981/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":456694821,"kind":"track","created_at":"2018/06/11 05:02:14 +0000","last_modified":"2018/06/20 17:44:56 +0000","permalink":"salo-or-the-120-days-of-sodom","permalink_url":"https://soundcloud.com/original-god/salo-or-the-120-days-of-sodom","title":"Salo (or the 120 Days of Sodom) [prod. inochi]","duration":133653,"sharing":"public","waveform_url":"https://w1.sndcdn.com/b9U05hEu5lWH_m.png","stream_url":"https://api.soundcloud.com/tracks/456694821/stream","uri":"https://api.soundcloud.com/tracks/456694821","user_id":110564403,"artwork_url":"https://i1.sndcdn.com/artworks-000359268765-lmouyy-large.jpg","comment_count":2,"commentable":true,"description":"[LYRICS] \n\nI’m losing my mind, tryna hold it steady \nI got the anime figures and blade in my left hand already\n\n120 days \nShe let me Salo her \nI am not a God but next to me youre just a follower \nI can feel the pain inside my heart its growing hollower \nAnd like Kanye West said I rather be a dick than swallower    \n\nRadical highway and I feel like Shadow \nShe said she love me girl youre nothing but a bad hoe \nAnd I know looks aren’t everything so please just get it right \nI rather leave you now and stay with her through every fight \n\nBut I rather fuck a bitch tonight \nThen cut slits in my wrist tonight \nCry myself to sleep and fuck you over till Im rich tonight \nI hope my words consume you like they live beneath in bed \nIm not evil Im not satan Im the voice inside your head \n\nDon't let them tempt you any longer put a blade up to their neck \nDrown them till youre feeling stronger that's how you really make her wet  \nI cannot listen any longer rid these thoughts inside my mind \nAnd now my soul is feeling stronger time to live the worst behind \n\nDo you love me? \nDo you trust me? \n`Will you drug me \n`Will you cut me \n`Wide open \nMind spoken \n`Im bleeding\ntimes hopeless \n\n120 days \nShe let me Salo her \nI am not a God but next to me youre just a follower \nI can feel the pain inside my heart its growing hollower \nAnd like Kanye West said I rather be a dick than swallower    \n\nfanlink.to/idiedintokyo\n\nALBUM DL: originalgod.bandcamp.com/album/i-died-in-tokyo\n\nAlso available on Apple Music, Spotify, Etc.\n\ntwitter.com/originalg6d \nwww.instagram.com/originalg6d/ \noriginalgod.tumblr.com/\nopen.spotify.com/artist/2P2zYG7Y8nNHrn6Sk7yLlz \nitunes.apple.com/us/artist/original-god/1018535599","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Electronic","isrc":null,"label_id":null,"label_name":null,"license":"all-rights-reserved","original_content_size":23561900,"original_format":"wav","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":8,"release_month":6,"release_year":2018,"reposts_count":26,"state":"finished","streamable":true,"tag_list":"\"Midnight Society\" \"Original God\" \"Pop Punk\" Metal Deathcore Emo Trap \"Hip Hop\" Pop Nightcore Anime","track_type":null,"user":{"avatar_url":"https://i1.sndcdn.com/avatars-000432511332-w55xwn-large.jpg","id":110564403,"kind":"user","permalink_url":"http://soundcloud.com/original-god","uri":"https://api.soundcloud.com/users/110564403","username":"Original God","permalink":"original-god","last_modified":"2018/06/20 17:41:35 +0000"},"likes_count":224,"attachments_uri":"https://api.soundcloud.com/tracks/456694821/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":6026752,"kind":"track","created_at":"2010/10/12 21:09:09 +0000","last_modified":"2011/07/07 00:47:04 +0000","permalink":"in-war-and-pieces","permalink_url":"https://soundcloud.com/sodomized/in-war-and-pieces","title":"In War And Pieces","duration":251601,"sharing":"public","waveform_url":"https://w1.sndcdn.com/2TJ8quhhkQnS_m.png","stream_url":"https://api.soundcloud.com/tracks/6026752/stream","uri":"https://api.soundcloud.com/tracks/6026752","user_id":1887774,"artwork_url":"https://i1.sndcdn.com/artworks-000002605090-f87oww-large.jpg","comment_count":2,"commentable":true,"description":"In War And Pieces\" title track of the upcoming Sodom masterpiece \"In War And Pieces","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Thrash Metal","isrc":"","label_id":null,"label_name":"SPV","license":"all-rights-reserved","original_content_size":6037092,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":19,"release_month":11,"release_year":2010,"reposts_count":11,"state":"finished","streamable":true,"tag_list":"thrash metal sodom war and pieces in","track_type":"original","user":{"avatar_url":"https://i1.sndcdn.com/avatars-000038904559-vmvwew-large.jpg","id":1887774,"kind":"user","permalink_url":"http://soundcloud.com/sodomized","uri":"https://api.soundcloud.com/users/1887774","username":"sodomized","permalink":"sodomized","last_modified":"2013/04/12 18:26:44 +0000"},"likes_count":138,"attachments_uri":"https://api.soundcloud.com/tracks/6026752/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":58581552,"kind":"track","created_at":"2012/09/03 19:43:09 +0000","last_modified":"2012/09/03 20:09:29 +0000","permalink":"02-agent-orange-sodom-cover","permalink_url":"https://soundcloud.com/sacrario/02-agent-orange-sodom-cover","title":"02 - AGENT ORANGE (Sodom cover)","duration":346362,"sharing":"public","waveform_url":"https://w1.sndcdn.com/tbjj5ArR7d48_m.png","stream_url":"https://api.soundcloud.com/tracks/58581552/stream","uri":"https://api.soundcloud.com/tracks/58581552","user_id":22399516,"artwork_url":"https://i1.sndcdn.com/artworks-000029650568-716evh-large.jpg","comment_count":6,"commentable":true,"description":"Segunda música do EP \"Asesinos\" de 2012 - Lançamento 05/09/2012\r\nEverson Krentz - Drums\r\nFabbio Webber - Vocals and Guitars\r\nGustavo Stuepp - Bass and Vocals\r\nRicardo Lemos - Guitars and Vocals","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Thrash Metal","isrc":"","label_id":null,"label_name":"","license":"all-rights-reserved","original_content_size":13853364,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":3,"state":"finished","streamable":true,"tag_list":"Thrash Metal Sodom cover Sacrario Brazil","track_type":"original","user":{"avatar_url":"https://i1.sndcdn.com/avatars-000283516341-d8al9f-large.jpg","id":22399516,"kind":"user","permalink_url":"http://soundcloud.com/sacrario","uri":"https://api.soundcloud.com/users/22399516","username":"Sacrario","permalink":"sacrario","last_modified":"2017/10/07 01:09:39 +0000"},"likes_count":34,"attachments_uri":"https://api.soundcloud.com/tracks/58581552/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":223159229,"kind":"track","created_at":"2015/09/10 01:45:35 +0000","last_modified":"2015/09/10 01:45:35 +0000","permalink":"king-of-nightmares","permalink_url":"https://soundcloud.com/user-980024785/king-of-nightmares","title":"King Of Nightmares","duration":400886,"sharing":"public","waveform_url":"https://w1.sndcdn.com/DsDCKOsdcBnp_m.png","stream_url":"https://api.soundcloud.com/tracks/223159229/stream","uri":"https://api.soundcloud.com/tracks/223159229","user_id":169889572,"artwork_url":null,"comment_count":0,"commentable":true,"description":"","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Black Metal","isrc":null,"label_id":null,"label_name":null,"license":"all-rights-reserved","original_content_size":9619748,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":0,"state":"finished","streamable":true,"tag_list":"\"Death Metal\" Experimental Metal","track_type":null,"user":{"avatar_url":"http://a1.sndcdn.com/images/default_avatar_large.png?1529594993","id":169889572,"kind":"user","permalink_url":"http://soundcloud.com/user-980024785","uri":"https://api.soundcloud.com/users/169889572","username":"Sodom Circle","permalink":"user-980024785","last_modified":"2016/01/28 17:13:52 +0000"},"likes_count":5,"attachments_uri":"https://api.soundcloud.com/tracks/223159229/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":223988310,"kind":"track","created_at":"2015/09/15 16:20:56 +0000","last_modified":"2015/09/15 16:21:16 +0000","permalink":"somatic-hallucination","permalink_url":"https://soundcloud.com/user-980024785/somatic-hallucination","title":"Somatic Hallucination","duration":296620,"sharing":"public","waveform_url":"https://w1.sndcdn.com/VA1nxABKcgG7_m.png","stream_url":"https://api.soundcloud.com/tracks/223988310/stream","uri":"https://api.soundcloud.com/tracks/223988310","user_id":169889572,"artwork_url":null,"comment_count":0,"commentable":true,"description":"","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Black Metal","isrc":null,"label_id":null,"label_name":null,"license":"all-rights-reserved","original_content_size":7117636,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":0,"state":"finished","streamable":true,"tag_list":"Metal \"Death Metal\" Experimental","track_type":null,"user":{"avatar_url":"http://a1.sndcdn.com/images/default_avatar_large.png?1529594993","id":169889572,"kind":"user","permalink_url":"http://soundcloud.com/user-980024785","uri":"https://api.soundcloud.com/users/169889572","username":"Sodom Circle","permalink":"user-980024785","last_modified":"2016/01/28 17:13:52 +0000"},"likes_count":4,"attachments_uri":"https://api.soundcloud.com/tracks/223988310/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":224329297,"kind":"track","created_at":"2015/09/17 19:02:48 +0000","last_modified":"2015/09/17 19:03:11 +0000","permalink":"the-dismissal-of-a-higher-power","permalink_url":"https://soundcloud.com/user-980024785/the-dismissal-of-a-higher-power","title":"The Dismissal Of A Higher Power","duration":330375,"sharing":"public","waveform_url":"https://w1.sndcdn.com/xquS2ZMfg9tp_m.png","stream_url":"https://api.soundcloud.com/tracks/224329297/stream","uri":"https://api.soundcloud.com/tracks/224329297","user_id":169889572,"artwork_url":null,"comment_count":1,"commentable":true,"description":"","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Black Metal","isrc":null,"label_id":null,"label_name":null,"license":"all-rights-reserved","original_content_size":7927640,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":0,"state":"finished","streamable":true,"tag_list":"Metal \"Death Metal\" Experimental","track_type":null,"user":{"avatar_url":"http://a1.sndcdn.com/images/default_avatar_large.png?1529594993","id":169889572,"kind":"user","permalink_url":"http://soundcloud.com/user-980024785","uri":"https://api.soundcloud.com/users/169889572","username":"Sodom Circle","permalink":"user-980024785","last_modified":"2016/01/28 17:13:52 +0000"},"likes_count":4,"attachments_uri":"https://api.soundcloud.com/tracks/224329297/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null},{"id":225082855,"kind":"track","created_at":"2015/09/22 18:46:17 +0000","last_modified":"2015/09/22 18:46:45 +0000","permalink":"the-breeder-of-kings","permalink_url":"https://soundcloud.com/user-980024785/the-breeder-of-kings","title":"The Breeder Of Kings","duration":403942,"sharing":"public","waveform_url":"https://w1.sndcdn.com/9h0eHbSNqwyt_m.png","stream_url":"https://api.soundcloud.com/tracks/225082855/stream","uri":"https://api.soundcloud.com/tracks/225082855","user_id":169889572,"artwork_url":null,"comment_count":0,"commentable":true,"description":"","download_count":0,"downloadable":false,"embeddable_by":"all","favoritings_count":0,"genre":"Black Metal","isrc":null,"label_id":null,"label_name":null,"license":"all-rights-reserved","original_content_size":9693100,"original_format":"mp3","playback_count":0,"purchase_title":null,"purchase_url":null,"release":"","release_day":null,"release_month":null,"release_year":null,"reposts_count":0,"state":"finished","streamable":true,"tag_list":"\"Death Metal\" Metal Experimental","track_type":null,"user":{"avatar_url":"http://a1.sndcdn.com/images/default_avatar_large.png?1529594993","id":169889572,"kind":"user","permalink_url":"http://soundcloud.com/user-980024785","uri":"https://api.soundcloud.com/users/169889572","username":"Sodom Circle","permalink":"user-980024785","last_modified":"2016/01/28 17:13:52 +0000"},"likes_count":3,"attachments_uri":"https://api.soundcloud.com/tracks/225082855/attachments","bpm":null,"key_signature":"","user_favorite":false,"user_playback_count":null,"video_url":null,"download_url":null}]}}
  if (response.ok) {
    const list = path(['data', 'collection'], response)
    const concatList = prevTracks.concat(list)
    yield put(MetalActions.successTracksList(concatList))
  } else {
    yield put(MetalActions.failureTracksList('Unable to fetch data'))
  }
}